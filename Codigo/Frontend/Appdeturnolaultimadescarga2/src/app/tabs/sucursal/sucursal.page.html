<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Sucursales</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Fondo transl√∫cido -->
  <div class="background-overlay"></div>

  <div class="form-container">
    <h2>üè¢ Gesti√≥n de Sucursales</h2>
    <p>Agreg√°, edit√° o elimin√° tus sucursales f√°cilmente.</p>

    <!-- Formulario -->
    <form (ngSubmit)="isEditing ? updateSucursal() : addSucursal()">

      <ion-item class="input-item">
        <ion-label position="floating">Nombre *</ion-label>
        <ion-input [(ngModel)]="nombre" name="nombre" required></ion-input>
      </ion-item>

      <ion-item class="input-item">
        <ion-label position="floating">Direcci√≥n</ion-label>
        <ion-input [(ngModel)]="direccion" name="direccion"></ion-input>
      </ion-item>

      <ion-item class="input-item">
        <ion-label position="floating">Tel√©fono</ion-label>
        <ion-input [(ngModel)]="telefono" name="telefono"></ion-input>
      </ion-item>

      <!-- Botones -->
      <ion-row class="buttons-row">
        <ion-col>
          <ion-button expand="block" color="success" type="submit">
            {{ isEditing ? 'Actualizar' : 'Agregar' }}
          </ion-button>
        </ion-col>
        <ion-col *ngIf="isEditing">
          <ion-button expand="block" fill="outline" color="medium" (click)="cancelEdit()">
            Cancelar
          </ion-button>
        </ion-col>
      </ion-row>
    </form>

    <!-- Mensaje de error -->
    <ion-text color="danger" *ngIf="errorMessage">
      <p>{{ errorMessage }}</p>
    </ion-text>
  </div>

  <!-- Lista de sucursales -->
  <ion-list>
    <ion-item *ngFor="let s of sucursales" class="sucursal-item">
      <ion-label>
        <h2>{{ s.nombre }}</h2>
        <p>{{ s.direccion || 'Sin direcci√≥n' }}</p>
        <p>{{ s.telefono || 'Sin tel√©fono' }}</p>
      </ion-label>

      <ion-button fill="clear" color="primary" (click)="editSucursal(s)">
        <ion-icon name="create-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear" color="danger" (click)="deleteSucursal(s.id_sucursal)">
        <ion-icon name="trash-outline"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>
</ion-content>
