<ion-content class="ion-padding background">

  <div class="form-container">
    <div class="form-card">
      <h2 class="title">Gestión de Servicios</h2>

      <!-- Formulario -->
      <form (ngSubmit)="isEditing ? guardarEdicion() : agregarServicio()">
        <ion-item>
          <ion-label position="floating">Nombre *</ion-label>
          <ion-input [(ngModel)]="servicio.nombre" name="nombre" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Descripción</ion-label>
          <ion-textarea [(ngModel)]="servicio.descripcion" name="descripcion"></ion-textarea>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Duración (minutos) *</ion-label>
          <ion-input type="number" [(ngModel)]="servicio.duracion_minutos" name="duracion"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Precio ($) *</ion-label>
          <ion-input type="number" [(ngModel)]="servicio.precio" name="precio"></ion-input>
        </ion-item>

        <ion-row class="buttons-row">
          <ion-col>
            <ion-button expand="block" color="primary" type="submit">
              {{ isEditing ? 'Guardar cambios' : 'Agregar Servicio' }}
            </ion-button>
          </ion-col>

          <ion-col *ngIf="isEditing">
            <ion-button expand="block" fill="outline" color="medium" (click)="cancelarEdicion()">
              Cancelar
            </ion-button>
          </ion-col>
        </ion-row>
      </form>

      <ion-list>
        <ion-item *ngFor="let s of servicios" class="service-item">
          <ion-label>
            <h2>{{ s.nombre }}</h2>
            <p>{{ s.descripcion || 'Sin descripción' }}</p>
            <p><strong>{{ s.duracion_minutos }}</strong> min • ${{ s.precio }}</p>
          </ion-label>
          <ion-button fill="clear" color="primary" (click)="editarServicio(s)">Editar</ion-button>
          <ion-button fill="clear" color="danger" (click)="eliminarServicio(s.id_servicio)">Eliminar</ion-button>
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>
